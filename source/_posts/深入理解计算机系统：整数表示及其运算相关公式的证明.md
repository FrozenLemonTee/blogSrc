---
title: 深入理解计算机系统：<br>整数表示及其运算相关公式的证明
comments: true
date: 2022-02-26 16:14:50
only:
top:
type:
sticky: 100
toc: true
tags:
categories: 学习小抄
keywords:
    - 深入理解计算机系统
    - CSAPP
    - 整数表示
    - 整数运算
mathjax: true
---

{% alertbox info "请注意，文章仍处于更新中~" %}

## **第一部分 整数表示**

&nbsp;

### **定义1 二进制位级表示方式**

二进制数的位级表示用行向量表示.

设行向量{%mathjax%}\overrightarrow{x}{%endmathjax%}是一个有{%mathjax%}\omega{% endmathjax%} 位的二进制数的位级表示，则有：

&nbsp;{%mathjax%}\overrightarrow{x}=[x_{\omega}\,\,x_{\omega-1}\,\,x_{\omega-2}\,\,...\,\,x_{2}\,\,x_{1}]\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(1){%endmathjax%}

> 示例：
>
> 数0xF74的位级表示为{%mathjax%}\overrightarrow{x}=[111101111000]{%endmathjax%}.



### **定义2 二进制位级表示为无符号数和补码**

#### **定义2.1 无符号数的表示**

设函数{%mathjax%}B2U_{\omega}{%endmathjax%}表示{%mathjax%}\omega{%endmathjax%}位二进制转无符号数，有：

&nbsp;{%mathjax%}B2U_{\omega}(\overrightarrow{x})=\sum_{i=1}^{\omega}x_{i}\cdot2_{}^{i-1}\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(2.1){%endmathjax%}.

> 示例：
>
> 数{%mathjax%}\overrightarrow{x}=[111101111000]{%endmathjax%}表示为无符号数为3960.

>注：
>函数{%mathjax%}U2B_{\omega}{%endmathjax%}是函数{%mathjax%}B2U_{\omega}{%endmathjax%}的逆运算，即：
>   {%mathjax%}U2B_{\omega}(B2U_{\omega}(\overrightarrow{x}))=\overrightarrow{x}{%endmathjax%}.

#### **定义2.2 补码的表示**
设函数{%mathjax%}B2T_{\omega}{%endmathjax%}表示{%mathjax%}\omega{%endmathjax%}位二进制转补码，有：

&nbsp;{%mathjax%}B2T_{\omega}(\overrightarrow{x})=-x_{\omega}\cdot2_{}^{\omega-1}+\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(2.2){%endmathjax%}.

> 示例：
>
> 数{%mathjax%}\overrightarrow{x}=[111101111000]{%endmathjax%}表示为补码为-136.

>注：
>函数{%mathjax%}T2B_{\omega}{%endmathjax%}是函数{%mathjax%}B2T_{\omega}{%endmathjax%}的逆运算，即：
>   {%mathjax%}T2B_{\omega}(B2T_{\omega}(\overrightarrow{x}))=\overrightarrow{x}{%endmathjax%}.

### **性质3 无符号数与补码的最值**

#### **性质3.1 无符号数的最小值**
对于{%mathjax%}\omega{%endmathjax%}位的无符号数，其最小值为{%mathjax%}U_{min}^{\omega}=0\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(3.1){%endmathjax%}.
> 证明：
>
> 对于式{%mathjax%}(2.1){%endmathjax%}，当且仅当 {%mathjax%}\forall x_{i}^{}=0{%endmathjax%}时，值最小，易知值为0.

#### **性质3.2 无符号数的最大值**
对于{%mathjax%}\omega{%endmathjax%}位的无符号数，其最大值为{%mathjax%}U_{max}^{\omega}=2_{}^{\omega}-1\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(3.2){%endmathjax%}.
> 证明：
>
> 对于式{%mathjax%}(2.1){%endmathjax%}，当且仅当 {%mathjax%}\forall x_{i}^{}=1{%endmathjax%}时，值最大，即{%mathjax%}\sum_{i=1}^{\omega}2_{}^{i-1}=2_{}^{\omega}-1{%endmathjax%}.

#### **性质3.3 补码的最小值**
对于{%mathjax%}\omega{%endmathjax%}位的补码，其最小值为{%mathjax%}T_{min}^{\omega}=-2_{}^{\omega-1}\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(3.3){%endmathjax%}.

> 证明：
>
> 对于式{%mathjax%}(2.2){%endmathjax%}，当且仅当 {%mathjax%}\forall i\leqslant  \omega-1, x_{i}^{}=0{%endmathjax%}，且{%mathjax%}x_{\omega}=1{%endmathjax%}时，值最小，即{%mathjax%}-2_{}^{\omega-1}{%endmathjax%}.

#### **性质3.4 补码的最大值**
对于{%mathjax%}\omega{%endmathjax%}位的补码，其最大值为{%mathjax%}T_{max}^{\omega}=2_{}^{\omega-1}-1\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(3.4){%endmathjax%}.

>证明：
>
>对于式{%mathjax%}(2.2){%endmathjax%}，当且仅当 {%mathjax%}\forall i\leqslant  \omega-1, x_{i}^{}=1{%endmathjax%}，且{%mathjax%}x_{\omega}=0{%endmathjax%}时，值最大，即{%mathjax%}\sum_{i=1}^{\omega-1}2_{}^{i-1}=2_{}^{\omega-1}-1{%endmathjax%}.


### **性质4 无符号数与补码的转换**

#### **性质4.1 补码转无符号数**
对于补码{%mathjax%}x{%endmathjax%}，设函数{%mathjax%}T2U_{\omega}^{}{%endmathjax%}表示补码对应相同的{%mathjax%}\omega{%endmathjax%}位的二进制位级所表示的无符号数，有：
{%mathjax%}T2U_{\omega}^{}(x)=\left\{\begin{matrix}
x+2_{}^{\omega},\,\,x< 0\\\\
x,\,\,x\geqslant 0
\end{matrix}\right.\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(4.1){%endmathjax%}

>证明：
> 
>当{%mathjax%}x\geqslant 0{%endmathjax%}时，{%mathjax%}x_{\omega}=0{%endmathjax%}.由式{%mathjax%}(2.1){%endmathjax%}和{%mathjax%}(2.2){%endmathjax%}得：
>{%mathjax%}B2U_{\omega}(\overrightarrow{x})=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}+0\cdot2_{}^{\omega-1}=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}{%endmathjax%}.
>{%mathjax%}B2T_{\omega}(\overrightarrow{x})=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}-0\cdot2_{}^{\omega-1}=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}{%endmathjax%}.
>因此有{%mathjax%}B2U_{\omega}(\overrightarrow{x})=B2T_{\omega}(\overrightarrow{x}){%endmathjax%}.
>则{%mathjax%}T2U_{\omega }^{}(x)=B2U_{\omega  }^{}(T2B_{\omega }^{}(x))=B2T_{\omega  }^{}(T2B_{\omega }^{}(x))=x{%endmathjax%}.
>
>当{%mathjax%}x< 0{%endmathjax%}时，{%mathjax%}x_{\omega}=1{%endmathjax%}.由式{%mathjax%}(2.1){%endmathjax%}和{%mathjax%}(2.2){%endmathjax%}得：
>{%mathjax%}B2U_{\omega}(\overrightarrow{x})=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}+2_{}^{\omega-1}{%endmathjax%}.
>{%mathjax%}B2T_{\omega}(\overrightarrow{x})=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}-1\cdot2_{}^{\omega-1}=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}-2_{}^{\omega-1}{%endmathjax%}.
>两式相减得：{%mathjax%}B2U_{\omega}(\overrightarrow{x})-B2T_{\omega}(\overrightarrow{x})=2\cdot2_{}^{\omega-1}{%endmathjax%}.
>即：{%mathjax%}B2U_{\omega}(\overrightarrow{x})=B2T_{\omega}(\overrightarrow{x})+2_{}^{\omega}{%endmathjax%}.
>则{%mathjax%}T2U_{\omega }^{}(x)=B2U_{\omega  }^{}(T2B_{\omega }^{}(x))=B2T_{\omega  }^{}(T2B_{\omega }^{}(x))+2_{}^{\omega}=x+2_{}^{\omega}{%endmathjax%}.


#### **性质4.2 无符号数转补码**
对于补码{%mathjax%}x{%endmathjax%}，设函数{%mathjax%}U2T_{\omega}^{}{%endmathjax%}表示无符号数对应相同的{%mathjax%}\omega{%endmathjax%}位的二进制位级所表示的补码，有：
{%mathjax%}U2T_{\omega}^{}(x)=\left\{\begin{matrix}
x-2_{}^{\omega},\,\,x> T_{max}^{\omega}\\\\
x,\,\,x\leqslant T_{max}^{\omega}
\end{matrix}\right.\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(4.2){%endmathjax%}

> 证明：
>
> 当{%mathjax%}x\leq T_{max}^{\omega }{%endmathjax%}时，{%mathjax%}x_{\omega}=0{%endmathjax%}.由式{%mathjax%}(2.1){%endmathjax%}和{%mathjax%}(2.2){%endmathjax%}得：
> {%mathjax%}B2U_{\omega}(\overrightarrow{x})=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}+0\cdot2_{}^{\omega-1}=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}{%endmathjax%}.
> {%mathjax%}B2T_{\omega}(\overrightarrow{x})=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}-0\cdot2_{}^{\omega-1}=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}{%endmathjax%}.
>
> 因此有{%mathjax%}B2T_{\omega}(\overrightarrow{x})=B2U_{\omega}(\overrightarrow{x}){%endmathjax%}.
>
> 则{%mathjax%}U2T_{\omega}(x)=B2T_{\omega}(U2B_{\omega}(x))=B2U_{\omega}(U2B_{\omega}(x))=x{%endmathjax%}.
>
> 当{%mathjax%}x> T_{max}^{\omega }{%endmathjax%}时，{%mathjax%}x_{\omega}=1{%endmathjax%}.由式{%mathjax%}(2.1){%endmathjax%}和{%mathjax%}(2.2){%endmathjax%}得：<br>
>{%mathjax%}B2U_{\omega}(\overrightarrow{x})=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}+2_{}^{\omega-1}{%endmathjax%}.<br>
>{%mathjax%}B2T_{\omega}(\overrightarrow{x})=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}-1\cdot2_{}^{\omega-1}=\sum_{i=1}^{\omega-1}x_{i}\cdot2_{}^{i-1}-2_{}^{\omega-1}{%endmathjax%}.
>两式相减得：{%mathjax%}B2T_{\omega}(\overrightarrow{x})=B2U_{\omega}(\overrightarrow{x})-2_{}^{\omega}{%endmathjax%}.
> 则{%mathjax%}U2T_{\omega}(x)=B2T_{\omega}(U2B_{\omega}(x))=B2U_{\omega}(U2B_{\omega}(x))-2_{}^{\omega}=x-2_{}^{\omega}{%endmathjax%}.

### **性质5 无符号数与补码的位拓展**

#### **性质5.1 无符号数的零拓展**

设有{%mathjax%}k{%endmathjax%}位的二进制数{%mathjax%}\overrightarrow{x}{%endmathjax%}，拓展{%mathjax%}\Delta k{%endmathjax%}位个0后得二进制数{%mathjax%}\overrightarrow{x_{}^{'}}{%endmathjax%}.有{%mathjax%}B2U_{k}(\overrightarrow{x})=B2U_{k+\Delta k}(\overrightarrow{x_{}^{'}})\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(5.1){%endmathjax%}.

> 证明：
>
> 由式{%mathjax%}(2.1){%endmathjax%}得：
>
> {%mathjax%}B2U_{k}(\overrightarrow{x})=\sum_{i=1}^{k}x_{i}\cdot 2_{}^{i-1}{%endmathjax%}.<br>{%mathjax%}B2U_{k+\Delta k}(\overrightarrow{x})=\sum_{i=1}^{k+\Delta k}x_{i}\cdot 2_{}^{i-1}=\sum_{i=1}^{k}x_{i}\cdot 2_{}^{i-1}+\sum_{i=k+1}^{k+\Delta k}x_{i}\cdot 2_{}^{i-1}{%endmathjax%}.
>
> 因为{%mathjax%}x_{k+1}=x_{k+2}=...=x_{k+\Delta k}=0{%endmathjax%}，所以{%mathjax%}\sum_{i=k+1}^{k+\Delta k}x_{i}\cdot 2_{}^{i-1}=0{%endmathjax%}.
>
> 则{%mathjax%}B2U_{k}(\overrightarrow{x})=B2U_{k+\Delta k}(\overrightarrow{x_{}^{'}}){%endmathjax%}.

#### **性质5.2 补码的符号拓展**

设有{%mathjax%}k{%endmathjax%}位的二进制数{%mathjax%}\overrightarrow{x}{%endmathjax%}，拓展{%mathjax%}\Delta k{%endmathjax%}位个最高位{%mathjax%}x_{k}{%endmathjax%}后得二进制数{%mathjax%}\overrightarrow{x_{}^{'}}{%endmathjax%}.有{%mathjax%}B2T_{k}(\overrightarrow{x})=B2T_{k+\Delta k}(\overrightarrow{x_{}^{'}})\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(5.2){%endmathjax%}.

> 证明：
>
> 令{%mathjax%}\Delta k=1{%endmathjax%}.
>
> 由式{%mathjax%}(2.2){%endmathjax%}得：
>
> 当{%mathjax%}\omega=1{%endmathjax%}时：{%mathjax%}B2T_{1}(\overrightarrow{x})=-x_{1}\cdot 2_{}^{1-1}=-x_{1}{%endmathjax%}.{%mathjax%}B2T_{2}(\overrightarrow{x_{}^{'}})=-x_{2}\cdot 2_{}^{2-1}+x_{1}=-2x_{2}+x_{1}{%endmathjax%}.
>
> 因为{%mathjax%}x_{2}=x_{1}{%endmathjax%}，则：{%mathjax%}B2T_{2}(\overrightarrow{x_{}^{'}})=-2x_{1}+x_{1}=-x_{1}=B2T_{1}(\overrightarrow{x}){%endmathjax%}.
>
> 当{%mathjax%}\omega=k{%endmathjax%}时：{%mathjax%}B2T_{k}(\overrightarrow{x})=-x_{k}\cdot 2_{}^{k-1}+\sum_{i=1}^{k-1}x_{i}\cdot 2_{}^{i-1}{%endmathjax%}.{%mathjax%}B2T_{k+1}(\overrightarrow{x_{}^{'}})=-x_{k+1}\cdot 2_{}^{k}+\sum_{i=1}^{k}x_{i}\cdot 2_{}^{i-1}{%endmathjax%}
>
> {%mathjax%}\,\,\,\,=-x_{k+1}\cdot 2_{}^{k}+x_{k}\cdot 2_{}^{k-1}+\sum_{i=1}^{k-1}x_{i}\cdot 2_{}^{i-1}{%endmathjax%}.
>
> 因为{%mathjax%}x_{k}=x_{k+1}{%endmathjax%}，则：
>
> {%mathjax%}B2T_{k+1}(\overrightarrow{x_{}^{'}})=-x_{k}\cdot 2_{}^{k}+x_{k}\cdot 2_{}^{k-1}+\sum_{i=1}^{k-1}x_{i}\cdot 2_{}^{i-1}{%endmathjax%}
>
> {%mathjax%}=-x_{k}\cdot 2_{}^{k-1}+\sum_{i=1}^{k-1}x_{i}\cdot 2_{}^{i-1}=B2T_{k}(\overrightarrow{x}){%endmathjax%}.
>
> 由数学归纳法，对任意{%mathjax%}\Delta k, k>0{%endmathjax%}都有：
>
> {%mathjax%}B2T_{k}(\overrightarrow{x})=B2T_{k+\Delta k}(\overrightarrow{x_{}^{'}}){%endmathjax%}.

### **性质6 无符号数与补码的位截断**

#### **性质6.1 无符号数的截断**

设{%mathjax%}\Delta k,  k>0{%endmathjax%}，对于一个{%mathjax%}k{%endmathjax%}位的二进制数{%mathjax%}\overrightarrow{x}{%endmathjax%}，截断其{%mathjax%}\Delta k{%endmathjax%}个最高位后得二进制数{%mathjax%}\overrightarrow{x_{}^{'}}{%endmathjax%}，有：

{%mathjax%}B2U_{k}(\overrightarrow{x_{}^{'}})=[B2U_{k+\Delta k}(\overrightarrow{x})]\,\,\,mod\,\,\,2_{}^{k}\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(6.1){%endmathjax%}.

> 证明：
>
> 由式{%mathjax%}(2.1){%endmathjax%}得：
>
> {%mathjax%}B2U_{k+\Delta k}(\overrightarrow{x})=\sum_{i=1}^{k+\Delta k}x_{i}\cdot 2_{}^{i-1}=\sum_{i=1}^{k}x_{i}\cdot 2_{}^{i-1}+\sum_{i=k+1}^{k+\Delta k}x_{i}\cdot 2_{}^{i-1}{%endmathjax%}.
>
> {%mathjax%}B2U_{k}(\overrightarrow{x_{}^{'}})=\sum_{i=1}^{k}x_{i}\cdot 2_{}^{i-1}{%endmathjax%}.
>
> 因为当{%mathjax%}i\geqslant k{%endmathjax%}时，{%mathjax%}2_{}^{i}\,\,\,mod\,\,\,2_{}^{k}=0{%endmathjax%}，则{%mathjax%}(\sum_{i=k+1}^{k+\Delta k}x_{i}\cdot 2_{}^{i-1})\,\,\,mod\,\,\,2_{}^{k}=0{%endmathjax%}.
>
> 因此{%mathjax%}[B2U_{k+\Delta k}(\overrightarrow{x})]\,\,\,mod\,\,\,2_{}^{k}=(\sum_{i=1}^{k}x_{i}\cdot 2_{}^{i-1})\,\,\,mod\,\,\,2_{}^{k}+(\sum_{i=k+1}^{k+\Delta k}x_{i}\cdot 2_{}^{i-1})\,\,\,mod\,\,\,2_{}^{k}{%endmathjax%} 
>
> {%mathjax%}=\sum_{i=1}^{k}x_{i}\cdot 2_{}^{i-1}=B2U_{k}(\overrightarrow{x_{}^{'}}){%endmathjax%}.

#### **性质6.2 补码的截断**

设{%mathjax%}\Delta k,  k>0{%endmathjax%}，对于一个{%mathjax%}k{%endmathjax%}位的二进制数{%mathjax%}\overrightarrow{x}{%endmathjax%}，截断其{%mathjax%}\Delta k{%endmathjax%}个最高位后得二进制数{%mathjax%}\overrightarrow{x_{}^{'}}{%endmathjax%}，有：

{%mathjax%}B2T_{k}(\overrightarrow{x_{}^{'}})=U2T_{k}([B2U_{k+\Delta k}(\overrightarrow{x})]\,\,\,mod\,\,\,2_{}^{k})\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,\,(6.2){%endmathjax%}.

> 证明：
>
> {%mathjax%}B2T_{k}(\overrightarrow{x_{}^{'}})=U2T_{k}(B2U_{k}(\overrightarrow{x_{}^{'}})){%endmathjax%}.
>
> 由式{%mathjax%}(6.1){%endmathjax%}得：
>
> {%mathjax%}B2U_{k}(\overrightarrow{x_{}^{'}})=[B2U_{k+\Delta k}(\overrightarrow{x})]\,\,\,mod\,\,\,2_{}^{k}{%endmathjax%}.
>
> 因此有：{%mathjax%}B2T_{k}(\overrightarrow{x_{}^{'}})=U2T_{k}([B2U_{k+\Delta k}(\overrightarrow{x})]\,\,\,mod\,\,\,2_{}^{k}){%endmathjax%}.

## **第二部分 整数运算**

&nbsp;

### **定义&性质7 无符号数的加法**

#### **定义7.1 无符号数加法的定义**

设有一个{%mathjax%}\omega_{1}{%endmathjax%}位的二进制数{%mathjax%}\overrightarrow{x}{%endmathjax%}和一个{%mathjax%}\omega_{2}{%endmathjax%}位的二进制数{%mathjax%}\overrightarrow{y}{%endmathjax%}.设{%mathjax%}x=B2U_{\omega_{1}}(\overrightarrow{x}),y=B2U_{\omega_{2}}(\overrightarrow{y}){%endmathjax%}.

设{%mathjax%}z=x+y{%endmathjax%}({%mathjax%}z{%endmathjax%}有{%mathjax%}\omega_{3}{%endmathjax%}的位级),{%mathjax%}\overrightarrow{z}=U2B_{\omega_{3}}(z){%endmathjax%}.将{%mathjax%}\overrightarrow{z}{%endmathjax%}截断至有{%mathjax%}\omega{%endmathjax%}位的{%mathjax%}\overrightarrow{z_{}^{'}}{%endmathjax%}，对应的有{%mathjax%}z_{}^{'}=U2B_{\omega}(\overrightarrow{z_{}^{'}}){%endmathjax%}.

则记{%mathjax%}x+_{\omega}^{u}y=z_{}^{'}{%endmathjax%}为{%mathjax%}x{%endmathjax%}与{%mathjax%}y{%endmathjax%}的{%mathjax%}\omega{%endmathjax%}位无符号数加法.

{% colorpanel info 提示 %}
实时更新中~
{% endcolorpanel %}